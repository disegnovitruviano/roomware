#!/bin/bash

# locations of roomware stuff

  SERVER_PATH="$ROOMWARE_PATH/lib"
  MODULE_PATH="$ROOMWARE_PATH/modules"
  COMMUNICATOR_PATH="$ROOMWARE_PATH/communicators"
  ROOMWARE_CONFIG_FILE="$ROOMWARE_PATH/conf/roomware.conf"


# build classpath

  # start with empty classpath
  unset CLASSPATH
  unset JARS

  # add all server jars to the classpath
  SERVER_JARS="`ls \"$SERVER_PATH\"|grep '[.]jar$'`"
  for SERVER_JAR in $SERVER_JARS;
    do CLASSPATH="$SERVER_PATH/$SERVER_JAR:$CLASSPATH";
  done

  # add all module jars to the classpath
  MODULE_JARS="`ls \"$MODULE_PATH\"|grep '[.]jar$'`"
  for MODULE_JAR in $MODULE_JARS;
    do CLASSPATH="$MODULE_PATH/$MODULE_JAR:$CLASSPATH";
  done

  # add all communicator jars to the classpath
  COMMUNICATOR_JARS="`ls \"$COMMUNICATOR_PATH\"|grep '[.]jar$'`"
  for COMMUNICATOR_JAR in $COMMUNICATOR_JARS;
    do CLASSPATH="$COMMUNICATOR_PATH/$COMMUNICATOR_JAR:$CLASSPATH";
  done

  # set it in the environment
  export CLASSPATH


# invoke the roomware server

  JAVA_ARGS="-DRoomWareConfig=$ROOMWARE_CONFIG_FILE"
  JAVA_CLASS="roomware.RoomWareServer"
  "$JAVA" $JAVA_ARGS "$JAVA_CLASS"
  
